<div class="p-3">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-xl font-semibold">
      Registro Mensual de Lecturas
    </h2>
    <div class="text-sm text-gray-600">
      Pr√≥ximo registro: {{ nextAvailableMonth$ | async | monthYear }}
    </div>
  </div>
  @for (month of months; track month) {
  <div class="mt-5">
    <mat-expansion-panel togglePosition="before">
      <mat-expansion-panel-header>
        <mat-panel-title>{{ month }}</mat-panel-title>
        <mat-panel-description>{{ currentYear }}</mat-panel-description>
      </mat-expansion-panel-header>

      <ng-container *ngIf="(dataService.mainData()!.data?.billing)![currentYear] as yearData">
        <app-month-detail [monthDetail]="convertTimestamps(yearData[month])"></app-month-detail>
      </ng-container>
      <button (click)="openRegisterMonthModal(month, currentYear)">Agregar datos</button>
    </mat-expansion-panel>
  </div>
  {{ month | json }}
  }
</div>

{{ dataService.mainData().data | json }}
